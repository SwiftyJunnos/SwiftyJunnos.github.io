---
title: 'ğŸ“± iOS - CompositionalLayout.02'
date: '2023-01-30'
tags: ['Swift', 'iOS']
draft: false
summary: 'Compositional = iOS ì‚¶ì˜ ì§ˆ í–¥ìƒ'
---

# Supplementary Item

CollectionViewë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ìì£¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” ìš”ì†Œë“¤ì´ ìˆìŠµë‹ˆë‹¤.

Badges, Headers, Footersë¼ê³  ë¶ˆë¦¬ëŠ” ì´ê²ƒë“¤ì€ ë¦¬ìŠ¤íŠ¸ì˜ ì•ì´ë‚˜ ë’¤ì— ë¶™ì–´ ì „ì²´ì ì¸ ë¦¬ìŠ¤íŠ¸ì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•´ì¤ë‹ˆë‹¤.

## Badges

`CompositionalLayout`ì—ì„œëŠ” ì´ëŸ° SupplementaryItemë“¤ì„ ì‚¬ìš©í•˜ê¸° ë”ìš± ì‰½ê²Œ Anchor ê°œë…ì„ ë„ì…í–ˆìŠµë‹ˆë‹¤.

![](https://i.imgur.com/IvAOVeC.png)

SupplementaryItemê³¼ CollectionViewì˜ ì‹œê°ì ì¸ ê´€ê³„ë¡œì„œ ì´ë“¤ì˜ ìœ„ì¹˜ë¥¼ ì •í•´ì¤€ë‹¤ëŠ” ê°œë…ì…ë‹ˆë‹¤.

ê°œë… ìì²´ë„ êµ‰ì¥íˆ ì‰½ì£ ?

ì ìš©ë„ ë™ì¼í•˜ê²Œ ë§¤ìš° ì‰½ê²Œ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.

```swift
let badgeAnchor = NSCollectionLayoutAnchor(
	edges: [.top, .trailing],
	fractionalOffset: CGPoint(x: 0.3, y: -0.3)
)
let badgeSize = NSCollectionLayoutSize(
	widthDimension: .absolute(20),
	heightDimension: .absolute(20)
)
let badge = NSCollectionLayoutSupplementaryItem(
	layoutSize: badgeSize,
	elementKind: "badge",
	containerAnchor: badgeAnchor
)
let item = NSCollectionLayoutItem(
	layoutSize: itemSize,
	supplementaryItems: [badge]
)
```

ì—¬ê¸°ì„œ ì ìš©ëœ `badge`ë¼ëŠ” `Item`ì€ ìš°ì¸¡ ìƒë‹¨ì— ìœ„ì¹˜í•˜ê³  20x20ì˜ ì‚¬ì´ì¦ˆë¥¼ ê°–ëŠ”ë‹¤ëŠ” ê²ƒì„ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆì£ .

## Header & Footer

Headerì™€ FooterëŠ” Badgesì™€ëŠ” ë‹¤ë¥¸ ì ì´ ìˆìŠµë‹ˆë‹¤.

BadgesëŠ” `Item`ì˜ íŠ¹ì • ìœ„ì¹˜ì— ê²¹ì³ë³´ì´ëŠ” ìš”ì†Œì§€ë§Œ, Headerì™€ FooterëŠ” `Item`ì„ ë°€ì–´ë‚´ê³  ê³µê°„ì„ ì°¨ì§€í•˜ë©´ì„œ ìœ„ì¹˜í•˜ëŠ” ìš”ì†Œë¼ëŠ” ì ì…ë‹ˆë‹¤.

ë”°ë¼ì„œ Headerì™€ FooterëŠ” `Boundary`ë¼ëŠ” ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤.

```swift
let header = NSCollectionLayoutBoundarySupplementaryItem(
	contentSize: headerSize,
	elementKind: "header",
	alignment: .top
)
let footer = NSCollectionLayoutBoundarySupplementaryItem(
	layoutSize: footerSize,
	elementKind: "footer",
	alignment: .bottom
)

header.pinToVisibleBounds = true
section.boundarySupplementaryItems = [header, footer]
```

`pinToVisibleBounds` í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•´ í”íˆ ë§í•˜ëŠ” Sticky Header ë˜í•œ ë§Œë“¤ê¸° ì‰¬ì›Œì¡ŒìŠµë‹ˆë‹¤.

## DecorationView

`ScrollView`ë“¤ì˜ ë°°ê²½ì„ ê¾¸ë©°ì£¼ëŠ” `DecorationView` ë˜í•œ ì•„ë˜ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
let background = NSCollectionLayoutDecorationItem.backgorund(elementKind: "background")
section.backgroundItems = [background]

layout.register(
	MyCoolDecorationView.self,
	forDecorationViewOfKind: "background"
)
```

## Estimated Self-Sizing

`Item`ë“¤ì˜ ìš”ì†Œë“¤ì˜ í¬ê¸°ê°€ ì •í•´ì§€ì§€ ì•Šê³  ë³€í™”í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.

ì»¨í…ì¸ ê°€ ìˆê±°ë‚˜ ì—†ëŠ” ê²½ìš°ê°€ ìˆì„ìˆ˜ë„ ìˆê³ , OSì˜ í…ìŠ¤íŠ¸ í¬ê¸°ë¥¼ ë³€ê²½í•¨ì— ë”°ë¼ `size`ì— ë³€í™”ê°€ ìƒê¸¸ìˆ˜ë„ ìˆì£ .

`size`ë¥¼ ì„¤ì •í•´ì¤„ ë•Œ `.estimated`ì„ í™œìš©í•˜ë©´ ì´ì— ëŒ€í•´ ìœ ì—°í•œ ëŒ€ì‘ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

```swift
let headerSize = NSCollectionLayoutSize(
	widthDimension: .fractionalWidth(1.0),
	heightDimension: .estimated(44.0)
)
let header = NSCollectionLayoutBoundarySupplementaryitem(
	layoutSize: headerSize,
	elementKind: "header",
	alignment: .top
)
header.pinToVisibleBounds = true
section.boundarySupplementaryItems = [header, footer]
```

ìœ„ ì˜ˆì‹œì˜ ê²½ìš° `Item`ì˜ ë†’ì´ë¥¼ ì»¨í…ì¸ ì˜ í¬ê¸° ë³€í™”ì— ëŒ€ì‘ì‹œí‚¬ ìˆ˜ ìˆëŠ” ê²ƒì´ì£ .

## Group ì•ˆì— Group ë„£ê¸°

CollectionViewê°€ ë³µì¡í•´ì§€ë©´ì„œ `Group` ì•ˆì— ë‹¤ë¥¸ `Group`ì„ ë„£ì„ ì¼ì´ ìƒê¸¸ ìˆ˜ë„ ìˆê² ì£ .

ì‚¬ì‹¤ `NSCollectionLayoutGroup`ì€ `NSCollectionLayoutItem`ì„ ìƒì†ë°›ì€ í•˜ìœ„íƒ€ì…ì…ë‹ˆë‹¤.

ë‹¤ë¥¸ ë§ë¡œ, `Group`ì„ ëª¨ì•„ì„œ ë‹¤ë¥¸ `Group`ì„ ë§Œë“¤ìˆ˜ë„ ìˆë‹¤ëŠ” ì˜ë¯¸ì£ .

ì´ëŸ° Nestingì—ëŠ” ì œí•œì´ ì—†ê¸° ë•Œë¬¸ì— ìƒë‹¹íˆ ë‹¤ì–‘í•œ í˜•íƒœì˜ ë””ìì¸ë“¤ì„ ë§Œë“¤ ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

![](https://i.imgur.com/ZHvtvEJ.png)

ì´ëŸ° í˜•íƒœë¥¼ ë§Œë“œë ¤ë©´ ì–´ë–»ê²Œ ë§Œë“¤ë©´ ë ê¹Œìš”?

```swift
let leadingItem = NSCollectionLayoutItem(
	layoutSize: leadingItemSize
)
let trailingItem = NSCollectionLayoutItem(
	layoutSize: trailingItemSize
)
let trailingGroup = NSCollectionLayoutGroup.vertical(
	layoutSize: trailingGroupSize,
	subitem: trailingItem,
	count: 2
)
let containerGroup = NSCollectionLayoutGroup.horizontal(
	layoutSize: containerGroupSize,
	subitems: [leadingItem, trailingGroup]
)
```

ì‚¬ì‹¤ êµ‰ì¥íˆ ì§ê´€ì ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`leadingItem`ê³¼ `trailingItem` ë‘˜ì´ ë¬¶ì¸ `trailingGroup`ì„ `containerGroup`ìœ¼ë¡œ ë¬¶ì€ í˜•íƒœì…ë‹ˆë‹¤.

## CollectionViewë¥¼ CollectionViewì— ë„£ê¸°

`CollectionView` ì•ˆì— ë˜ ë‹¤ë¥¸ `CollectionView`ê°€ ìˆì„ ê²½ìš°, ìŠ¤í¬ë¡¤í•˜ëŠ” ë°©í–¥ì´ ë°”ë€Œê¸° ë•Œë¬¸ì— ë¶€ìì—°ìŠ¤ëŸ¬ìš´ ë™ì‘ì„ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ëŸ° ê²½ìš°ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ”

```swift
section.orthogonalScrollingBehavior = .continuous
```

ì´ í•œ ì¤„ì˜ ì½”ë“œë¥¼ ì¶”ê°€í•´ì£¼ë©´ í•´ê²°ë©ë‹ˆë‹¤.

```swift
enum UICollectionLayoutSectionOrthogonalScrollingBehavior: Int {
	case none
	case continuous
	case continuousGroupLeadingBoundary
	case paging
	case groupPaging
	case groupPagingCentered
}
```

ì´ë ‡ê²Œ ë‘ê°œì˜ `continuous` ì˜µì…˜ê³¼ 3ê°œì˜ paging ì˜µì…˜ì´ ìˆìœ¼ë‹ˆ ì›í•˜ëŠ” ê°’ì„ ì°¾ì•„ ë„£ì–´ë´…ì‹œë‹¤.
