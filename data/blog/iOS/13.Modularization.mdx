---
title: ðŸ“± iOS - ëª¨ë“ˆí™”ì™€ Clean Architecture
date: 2023-06-20
tags:
  - Swift
  - iOS
  - MusicSpot
draft: false
summary: ëª¨ë“ˆí™” ëœ êµ¬ì¡° Clean Architecture ì‹œì ì—ì„œ ê°œì„ í•˜ê¸°
---

# Modular Architecture

MusicSpot í”„ë¡œì íŠ¸ëŠ” ëª¨ë“ˆëŸ¬ ì•„í‚¤í…ì²˜ë¥¼ ì±„íƒí•´ì„œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ì‚¬ì‹¤ "ëª¨ë“ˆëŸ¬ ì•„í‚¤í…ì²˜"ì˜ ì–´ë–¤ ìž¥ì ì„ ì‚´ë¦¬ê² ë‹¤ ëŠ” ì  ë³´ë‹¤ëŠ”

ë¶„ë¦¬ëœ ê° ë ˆì´ì–´ë¥¼ ê°•í•˜ê²Œ ë¶„ë¦¬ì‹œì¼œì„œ `import`í•˜ì§€ ì•Šìœ¼ë©´ ì‚¬ìš©í•  ìˆ˜ ì—†ë„ë¡

ì•„ì£¼ ê°•í•œ ì œì•½ì„ ë‘ê³  ê° ë ˆì´ì–´ì— ëŒ€í•´ í•™ìŠµí•˜ê² ë‹¤!

ì¸¡ë©´ì´ ê°•í–ˆìŠµë‹ˆë‹¤.

ê·¸ë ‡ë‹¤ë©´ ê·¸ ëª©ì ì— ë§žê²Œ ê° ë ˆì´ì–´ì˜ ë…ë¦½ì´ ì•„ì£¼ ìž˜ ì´ë£¨ì–´ì¡Œì–´ì•¼ê² ì£ ?

ê³¼ì—° ê·¸ëž¬ì„ê¹Œìš”?

## ë¬¸ì œê°€ ë§Žì•„ ë³´ì´ëŠ” í˜„ìž¬ êµ¬ì¡°

ì§€ë‚œ í”„ë¡œì íŠ¸ë¥¼ ëŒì•„ë³´ë©°, ê³¼ì—° ëª¨ë“ˆëŸ¬ ì•„í‚¤í…ì²˜ì˜ ì±„íƒ ëª©ì ì— ë§žê²Œ

ì•„í‚¤í…ì²˜ë¥¼ "ìž˜" ì‚¬ìš©í•˜ê³  ìžˆì„ê¹Œ? ë¥¼ ëŒì•„ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

ê·¸ëž˜ì„œ Dependency ê·¸ëž˜í”„ë¥¼ í•œ ë²ˆ ê·¸ë ¤ë´¤ìŠµë‹ˆë‹¤.

(ì €í¬ ì•±ì€ Tuistë¥¼ ì‚¬ìš©í•˜ê³  ìžˆì§€ ì•Šê¸° ë•Œë¬¸ì—, í•œë•€í•œë•€ ê·¸ë ¤ì¤˜ì•¼ í–ˆìŠµë‹ˆë‹¤.)

![](https://i.imgur.com/IflEaig.jpg)

ë„¤.. ë§Žì´ ì–´ì§€ëŸ½ë„¤ìš” ã…Ž..

ì´ë¥¼ ì¡°ê¸ˆ _(ë§Žì´)_ ë‹¨ìˆœí™” ì‹œì¼œë³´ë©´ ì•„ëž˜ì™€ ê°™ì•„ì§‘ë‹ˆë‹¤.

![](https://i.imgur.com/7KzZ84W.png)

ì—¬ê¸°ì„œ ì œê²Œ ìƒê¸´ ì˜ë¬¸ì ì€ í¬ê²Œ ì„¸ê°€ì§€ìž…ë‹ˆë‹¤.

1. Feature íŒ¨í‚¤ì§€ ì¤‘ **MSCoreKit**ì˜ ê¸°ëŠ¥ì„ **ì§ì ‘ ê°€ì ¸ë‹¤ ì“°ëŠ” ë¶€ë¶„**ì´ ìžˆë‹¤. ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹  MSDataì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë°”ëžŒì§í•˜ì§€ ì•Šì€ê°€?
2. Feature íŒ¨í‚¤ì§€ê°€ **MSDataì™€ MSDomain ë ˆì´ì–´ë¥¼ ëª¨ë‘** ì˜ì¡´í•˜ê³  ìžˆë‹¤. MSDomain ë ˆì´ì–´ëŠ” ì§€ê¸ˆ í˜•íƒœê°€ ìµœì„ ì¸ê°€?
3. MSFoundation íŒ¨í‚¤ì§€, íŠ¹ížˆ Loggerì˜ ê²½ìš° ëª¨ë“  íŒ¨í‚¤ì§€ê°€ **êµ¬ë¶„ ì—†ì´** ì˜ì¡´ì„±ì„ ê°–ê³  ìžˆë‹¤. ê´œì°®ì€ê±´ê°€?

í•˜ë‚˜í•˜ë‚˜ ê³ ë¯¼í•´ë´…ì‹œë‹¤.

## CoreKitì˜ ì˜ì¡´ì„±ì€ ì–´ë””ë¥¼ í–¥í•´ì•¼ í•˜ëŠ”ê°€

ê°€ìž¥ í° ê³ ë¯¼ì„ ê°€ì§€ê³  ìžˆëŠ” ë¶€ë¶„ìž…ë‹ˆë‹¤.

CoreKitì˜ ë¡œì§ë“¤ì´ Feature ëª¨ë“ˆë“¤ì— ì—´ë ¤ìžˆì–´ë„ ë˜ëŠ”ê°€? ì— ëŒ€í•œ ë¬¸ì œìž…ë‹ˆë‹¤ë§Œ

Clean Architectureì˜ ì–´ë–¤ ë ˆì´ì–´ì™€ ì—°ê´€ì„±ì´ ë†’ì€ ì§€ ë¶€í„° ì‚´íŽ´ë³´ê² ìŠµë‹ˆë‹¤.

ì €í¬ê°€ ë‚´ë ¸ë˜ CoreKitì— ëŒ€í•œ ì •ì˜ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

> ì•±ì˜ í•µì‹¬ì ì¸ ë¡œì§ë“¤ì´ í¬í•¨ëœ ëª¨ë“ˆ

ë„¤íŠ¸ì›Œí‚¹, ìºì‹±, ë¡œì»¬ íŒŒì¼ ì €ìž¥ ë“± ë¹„êµì  ë¦¬ì†ŒìŠ¤ë¥¼ ë§Žì´ ìž¡ì•„ë¨¹ëŠ” ë¡œì§ë“¤ì´ í¬í•¨ë©ë‹ˆë‹¤.

ë˜, í•œ ê°€ì§€ ê³µí†µì ì´ í•˜ë‚˜ ë” ìžˆëŠ”ë°, ì§€ê¸ˆê¹Œì§€ëŠ” ì–´ë–¤ í˜•íƒœë¡œë“  **ë°ì´í„°**ë¥¼ íœ™ë“í•˜ê±°ë‚˜ ê°€ê³µí•˜ëŠ” ë¡œì§ë“¤ì´ í¬í•¨ë˜ì–´ ìžˆë‹¤ëŠ” ê²ƒìž…ë‹ˆë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— Presentation ë ˆì´ì–´ë³´ë‹¤ëŠ” **Data ë ˆì´ì–´**ì™€ì˜ ì—°ê´€ì„±ì´ í›¨ì”¬ ë†’ìŠµë‹ˆë‹¤.

ì—¬ê¸°ê¹Œì§€ê°€ Data ë ˆì´ì–´ê°€ CoreKit ëª¨ë“ˆì„ ì˜ì¡´í•´ì•¼í•˜ëŠ” ì´ìœ ì˜€ê³ , ì´ì œë¶€í„°ëŠ” Feature ëª¨ë“ˆë“¤ì—ì„œì˜ ì´ì•¼ê¸°ìž…ë‹ˆë‹¤.

Presentation ë ˆì´ì–´ì—ì„œ CoreKitì˜ ë¡œì§ì„ ì™œ í•„ìš”ë¡œ í•˜ê³  ìžˆì„ê¹Œìš”?

ê°€ìž¥ ëŒ€í‘œì ì¸ ì˜ˆì‹œìž…ë‹ˆë‹¤.

```swift
self.imageView.ms.setImage(url: someURL)
```

ImageFetcher ëª¨ë“ˆì˜ `UIImageView`ì— ëŒ€í•œ extensionì„ í™œìš©í•œ ë°©ì‹ìž…ë‹ˆë‹¤.

ì´ ë¬¸ì œëŠ” ë‹¤í–‰ížˆ `ms`ë¡œ wrappingí•œ ë¶€ë¶„ì„ UI ëª¨ë“ˆìª½ìœ¼ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìžˆì—ˆìŠµë‹ˆë‹¤.

ê·¼ë³¸ì ì€ ë¬¼ìŒì— ëŒ€í•œ ë‹µì€ ì–´ë–»ê²Œ ë‚´ë¦¬ë©´ ë ê¹Œìš”?

> Presentation ë ˆì´ì–´ì— í•´ë‹¹í•˜ëŠ” Feature ëª¨ë“ˆë“¤ì€ CoreKitì— ëŒ€í•œ ì˜ì¡´ì„ ê°€ì ¸ë„ ë˜ëŠ”ê°€?

CoreKitì„ ëª¨ë“ˆí™”í•˜ê³ , Data ë ˆì´ì–´ì— ì˜ì¡´ì„±ì„ ë¶€ì—¬í•˜ëŠ” ê²ƒì— ëŒ€í•œ ìž¥ì ì„ ì •ë¦¬í•´ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

1. ìµœì™¸ê³½ì¸ Presentation ë ˆì´ì–´ì—ì„œ ë¡œì§ì— ëŒ€í•œ ê´€ì‹¬ì„ ëŠì–´ë‚¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´í›„ ë¡œì§ì´ ë³€ê²½ë˜ë”ë¼ë„ ì¶”ìƒí™”í•œ Protocolì´ ë°”ë€Œì§€ ì•ŠëŠ” í•œ Presentation ë ˆì´ì–´ì˜ ë³€ê²½ì ì€ ì—†ìŠµë‹ˆë‹¤.
2. Presentation ë ˆì´ì–´ì— Repositoryë¥¼ ì£¼ìž…ì‹œì¼œì£¼ëŠ” ê²ƒ ë§Œìœ¼ë¡œë„ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ë‹¤.

ì œê°€ ìƒê°í•˜ëŠ” ê°€ìž¥ í° ì´ì ì€ ì´ ë‘ê°€ì§€ìž…ë‹ˆë‹¤.

ì‰½ê²Œ ë§í•˜ë©´ **1. ì•½í•œ ê²°í•©**ê³¼ **2. í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**ìž…ë‹ˆë‹¤.

ê·¸ë ‡ë‹¤ë©´ ì´ ìž¥ì ì„ ë°˜ëŒ€ë¡œ ë§í•˜ë©´ Feature ëª¨ë“ˆì´ CoreKitì— ì˜ì¡´í•  ê²½ìš° ë°œìƒí•˜ëŠ” ë¬¸ì œì ì´ ë˜ê² ì£ ?

1. CoreKitì˜ ë¡œì§ì´ ë³€ê²½ë  ê²½ìš°, ì´ ë¡œì§ì„ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  Feature ë¶€ë¶„ì˜ ì½”ë“œì— ë³€ê²½ì´ ê°€í•´ì ¸ì•¼ í•œë‹¤.
2. Presentation ë ˆì´ì–´ì˜ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ CoreKitì„ í•„ìˆ˜ì ìœ¼ë¡œ import í•´ì•¼í•œë‹¤. ì¦‰, CoreKitì˜ ë³€í™”ê°€ CoreKit ìžì²´ì˜ í…ŒìŠ¤íŠ¸ë¿ë§Œ ì•„ë‹ˆë¼ ViewModelì˜ í…ŒìŠ¤íŠ¸ì—ë„ ì˜í–¥ì„ ì¤€ë‹¤.

ê²°êµ­ ë‹¨ì ì€ CoreKitì˜ ë³€í™”ê°€ íŒŒíŽ¸í™” ëœ ì½”ë“œë“¤ì— ì˜í–¥ì„ ì£¼ê³ , ë³€í™”ë¥¼ ê°•ì œí•œë‹¤ëŠ” ê²ƒ ìž…ë‹ˆë‹¤.

## ê²°êµ­ì€ UseCase..?

ë‘ ë²ˆì§¸ ì£¼ì œ, Feature ëª¨ë“ˆë“¤ì´ Data ë ˆì´ì–´ì™€ Domain ë ˆì´ì–´ ëª¨ë‘ë¥¼ ì˜ì¡´í•˜ê³  ìžˆëŠ”ë°, ê´œì°®ì€ê±´ê°€? ìž…ë‹ˆë‹¤.

ì´ ì£¼ì œì— ëŒ€í•´ ì´ì•¼ê¸°í•˜ê¸° ì „ì—, ì €í¬ ì•±ì€ UseCaseë¥¼ ì‚¬ìš©í•˜ê³  ìžˆì§€ ì•ŠìŠµë‹ˆë‹¤.

ê·¸ í•„ìš”ì„±ì„ ëŠë¼ì§€ ëª»í–ˆê¸° ë•Œë¬¸ì¸ë°ìš”..

ë”°ë¼ì„œ Domain ë ˆì´ì–´ì—ëŠ” ì‚¬ì‹¤ìƒ ì—”í‹°í‹°ë§Œ í¬í•¨ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.

ë•Œë¬¸ì— Repositoryì˜ ë¡œì§ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ Data ë ˆì´ì–´ë¥¼, ì—”í‹°í‹° ëª¨ë¸ë“¤ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ Domain ë ˆì´ì–´ë¥¼ ëª¨ë‘ ì˜ì¡´í•˜ê³  ìžˆëŠ” ê²ƒì´ì£ .

ê·¸ë ‡ë‹¤ê³  ë‹¨ìˆœí•˜ê²Œ Presentation ë ˆì´ì–´ê°€ Domain ë ˆì´ì–´ë§Œì„ ì˜ì¡´í•˜ë„ë¡ ë§Œë“¤ê¸° ìœ„í•´ UseCaseë¥¼ ë„ìž…í•˜ëŠ” ê²ƒì€ ë„ìž…ì˜ ì´ìœ ë¡œì„œ íƒ€ë‹¹í•˜ì§€ ì•Šë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.

ê·¸ë ‡ë‹¤ë©´ Domain ë ˆì´ì–´ ìžì²´ë¥¼ ì†ë´ì•¼ê² ì£ ..?

![](https://i.imgur.com/0rfLHfN.png)

ìž, ì´ì¯¤ì—ì„œ ë‹¤ì‹œ í•œ ë²ˆ í˜„ìž¬ êµ¬ì¡°ë¥¼ ì‚´íŽ´ë´…ì‹œë‹¤.

ì €í¬ êµ¬ì¡° ìƒ í•œê°€ì§€ íŠ¹ì´í•œ ì ì´ ìžˆëŠ”ë°ìš”, ë°”ë¡œ **Domain ë ˆì´ì–´ê°€ ë‹¤ë¥¸ ì–´ë–¤ ëª¨ë“ˆë„ ì˜ì¡´í•˜ì§€ ì•Šê³  ìžˆë‹¤**ëŠ” ì ìž…ë‹ˆë‹¤.

> WIP...