---
title: 'ğŸ Swift - í´ë¡œì €(Closure).03'
date: '2022-03-03'
tags: ['Swift']
draft: false
summary: '`@escaping` í´ë¡œì €ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤.'
---

ì´ë²ˆì—ëŠ” `@autoclosure`ì™€ `@escaping`ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

## @autoclosure

autoclosureë„ ìš°ì„  ìš©ì–´ ìì²´ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

ìë™-í´ë¡œì €?

ì´ê²Œ ëŒ€ì²´ ë­˜ê¹Œìš”?

ì´ë²ˆì—ëŠ” ì •ì˜ë¥¼ ì‚´í´ë´…ì‹œë‹¤.

> ì¸ìë¡œì„œ ì „ë‹¬ëœ ì¼ë°˜êµ¬ë¬¸/í•¨ìˆ˜ë¥¼ í´ë¡œì €ë¡œì„œ ê°ì‹¸ëŠ” ê²ƒ

ì•„ë¬´ë˜ë„ ì¼ë°˜êµ¬ë¬¸/í•¨ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ í´ë¡œì €ë¡œì„œ ì·¨ê¸‰í•œë‹¤.. ë¼ëŠ” ì˜ë¯¸ì¸ ê²ƒ ê°™ë„¤ìš”.

ì•„ì§ë„ ì´í•´ê°€ ì˜ ê°€ì§€ ì•Šìœ¼ë‹ˆ ì˜ˆì œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

```swift
func foo(closure: @autoclosure () -> ()) {
  // Tasks
}
```

`@autoclosure`ê°€ ì‚¬ìš©ë˜ëŠ” ìœ„ì¹˜ë„ ì˜ ê¸°ì–µí•´ì£¼ì„¸ìš”. ì¸ìëª… ë’¤ íƒ€ì… ì •ì˜ ë°”ë¡œ ì•ì— ìœ„ì¹˜í•´ìˆìŠµë‹ˆë‹¤!

ì ê·¸ë˜ì„œ ëŒ€ì²´ ì´ê²Œ ë¬´ìŠ¨ë§ì´ëƒ..

**@autoclosure** ë¥¼ ì‚¬ìš©í•˜ë©´ í´ë¡œì € íƒ€ì…ì˜ ì¸ì **closure**ëŠ” í´ë¡œì €ê°€ ì•„ë‹Œ ì¼ë°˜êµ¬ë¬¸/í•¨ìˆ˜ë¥¼ ë°›ì•„ë„ **í´ë¡œì €ë¡œì„œ ì²˜ë¦¬**í•´ì¤ë‹ˆë‹¤.

ìš°ì„  @autoclosureë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ë•Œë¥¼ ë´…ì‹œë‹¤.

```swift
func foo(_ closure: () -> Void) {
  closure()
}
```

ìœ„ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ì–´ë–»ê²Œ í˜¸ì¶œí• ê¹Œìš”? ì•„ë˜ì™€ ê°™ì´ í˜¸ì¶œí•©ë‹ˆë‹¤.

```swift
foo({ 
  print("Hi! I'm Closure")
})
```

ì´ë²ˆì—” ê°™ì€ í•¨ìˆ˜ì— @autoclosureë¥¼ ì‚¬ìš©í•´ë´…ì‹œë‹¤.

```swift
func foo(_ closure: @autoclosure () -> Void) {
  closure()
}
```

ìœ„ í•¨ìˆ˜ëŠ” ì•„ë˜ì²˜ëŸ¼ í˜¸ì¶œë©ë‹ˆë‹¤.

```swift
foo(print("Hi! I'm Closure"))
```

`{ â€¦ }` ì´ ì¤‘ê´„í˜¸ê°€ ì—†ì–´ì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆì£ .

í´ë¡œì €ëŠ” ë³¸ì¸ì´ í´ë¡œì €ì„ì„ ì•Œë¦¬ê¸° ìœ„í•´ ì¤‘ê´„í˜¸ê°€ ë¬´ì¡°ê±´ í•„ìš”í•©ë‹ˆë‹¤. @autoclosureëŠ” í´ë¡œì €ê°€ ì•„ë‹Œ ì¼ë°˜êµ¬ë¬¸/í•¨ìˆ˜ë¥¼ ì¤‘ê´„í˜¸ë¡œ ê°ì‹¼ ì—­í• ì„ í•´ì£¼ëŠ” ê²ƒì´ì£ .

ë‹¨ ìœ ì˜í•  ì ì€ @autoclosureë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” í´ë¡œì €ì˜ ì¸ìê°€ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤!

```swift
func foo(closure: @autoclosure (Int) -> Void) {
  closure()
}
```

ìœ„ì™€ ê²½ìš° `(Int) -> Void` ì¸ìë¡œ Int íƒ€ì…ì´ ë“¤ì–´ê°€ìˆì£ ?

ë”°ë¼ì„œ ì˜¤ë¥˜ê°€ ë‚©ë‹ˆë‹¤. ê¼­ ì£¼ì˜í•´ì£¼ì„¸ìš”!

ê·¸ë ‡ë‹¤ë©´ ì¼ë°˜êµ¬ë¬¸ì— ë¹„í•´ì„œ @autoclosureì„ ì‚¬ìš©í–ˆì„ ë•Œì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¼ê¹Œìš”?

ì¼ë°˜êµ¬ë¬¸ì€ ì›ë˜ ì‹¤í–‰ ìˆœì„œê°€ ë˜ë©´ **ì¦‰ì‹œ ì‹¤í–‰**ë©ë‹ˆë‹¤.

ì§€ì—°ì„ ì¤€ë‹¤ê³  í•˜ë”ë¼ë„ ì§€ì—°ì„ ì£¼ëŠ” í•¨ìˆ˜ê°€ ì¦‰ì‹œ ì‹¤í–‰ë˜ì—ˆê¸° ë•Œë¬¸ì— ë’¤ì— ë”°ë¼ì˜¤ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ë“¤ì´ ì§€ì—°ë˜ëŠ” ê²ƒì´ì£ .

ê·¸ëŸ°ë° í´ë¡œì €ëŠ” ì¦‰ì‹œ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í•¨ìˆ˜ ì•ˆì—ì„œ **í•´ë‹¹ ì¸ìê°€ ì‚¬ìš©ë  ë•Œ ì‹¤í–‰**ë˜ì£ .

ê²°ë¡ ì ìœ¼ë¡œ @escapingì€ ì¼ë°˜êµ¬ë¬¸ì„ í´ë¡œì €ì²˜ëŸ¼ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ ìœ ìš©í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤.

## @escaping

`@escaping` í´ë¡œì €ë€ ìš©ì–´ì˜ ì´ë¦„ì—ì„œ ìœ ì¶”í•  ìˆ˜ ìˆë“¯ì´, í•¨ìˆ˜ì—ì„œ ë²—ì–´ë‚˜ì„œë„ ì‹¤í–‰ë  ìˆ˜ ìˆëŠ” í´ë¡œì €ì…ë‹ˆë‹¤.

`@escaping` í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•¨ìˆ˜ê°€ ëë‚œ ë’¤ì—ë„ ì‹¤í–‰ë  ìˆ˜ ìˆë‹¤.
ì¤‘ì²©í•¨ìˆ˜ì—ì„œ ì¤‘ì²©í•¨ìˆ˜ë¥¼ return í•  ìˆ˜ ìˆë‹¤.
ë³€ìˆ˜/ìƒìˆ˜ì— í´ë¡œì €ë¥¼ ëŒ€ì…í•  ìˆ˜ ìˆë‹¤.
ì´ ë§ì€ ì§€ê¸ˆê¹Œì§€ ë‹¤ë¤˜ë˜ í´ë¡œì €ë“¤ì€ ìœ„ì˜ ê²½ìš°ë“¤ì´ ì „ë¶€ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ì†Œë¦¬ê² ì£ ?

ì§€ê¸ˆê¹Œì§€ ë‹¤ë¤„ì˜¨ í´ë¡œì €ë“¤ ê°™ì´ @escaping êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì§€ ì•Šì€ í´ë¡œì €ë“¤ì„ non-escaping closureë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

API ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ Alamofireì˜ ì˜ˆì‹œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.

```swift
func dataGET(from url: URL, completion: @escaping (AnyObject) -> ()) {
  DispatchQueue.global(qos: .background).async {
    Alamofire.request(url, method: .get).responseObject { (response: DataResponse<FilmResponse>) in 
    switch response.result {
    case .success(_):
      let res = response.result.value
      let resURL = res.results.imageID
      print(resURL ?? "No URL Found")
    case .failure(let error):
      print(error)
    }}
  }
}
```

êµ‰ì¥íˆ ë³µì¡í•´ë³´ì´ì£ ? ì‚¬ì‹¤ ë‹¤ë¥¸ê±´ ë‹¤ í•„ìš”ì—†ìŠµë‹ˆë‹¤.

```swift
func dateGET(from url: URL, completion: @escaping (AnyObject) -> ()) {
  DispatchQueue.global(qos: .background).async {
    // Blah Blah
  }
}
```

ì´ë ‡ê²Œë§Œ ë³´ë©´ ë©ë‹ˆë‹¤.

ì´ì œ ìš°ë¦¬ëŠ” ì € í•¨ìˆ˜ë¥¼ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

ë§ˆì§€ë§‰ ì¸ìë¡œ closureë¥¼ ì‚¬ìš©í•˜ì—¬ **Trailing Closure** ë°©ì‹ì´ ì±„íƒë˜ì—ˆë„¤ìš”. ë˜, `@escaping` í´ë¡œì €ê°€ ì‚¬ìš©ëœ ê²ƒë„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™œ ì‚¬ìš©í–ˆì„ê¹Œìš”?

API í˜¸ì¶œì€ ìƒëŒ€ì ìœ¼ë¡œ ë§ì€ ì‹œê°„ì´ ì†Œìš”ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ë³´í†µ ë¹„ë™ê¸°ì„±ìœ¼ë¡œ ì‹¤í–‰í•˜ì£ . ìœ ì €ê°€ ë¡œë”©ì´ ë‹¤ ë  ë•Œê¹Œì§€ ë¨¹í†µì´ ëœ ì•±ì„ ê°€ë§Œíˆ ë³´ê³  ìˆì§„ ì•Šì„í…Œë‹ˆê¹Œìš”.

ë”°ë¼ì„œ ìœ„ í•¨ìˆ˜ê°€ ì™„ë£Œë˜ê¸° ì „ì— `DispatchQueue`ë¡œ ì‹¤í–‰í•œ êµ¬ë¬¸ë“¤ì€ ì™„ë£Œë˜ì—ˆì„ ê°€ëŠ¥ì„±ì´ ê±°ì˜ ì „ë¬´í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ @escaping í´ë¡œì €ê°€ ì•„ë‹ˆë¼ non-escaping í´ë¡œì €ë¥¼ ì‚¬ìš©í–ˆë‹¤ë©´..? **í•¨ìˆ˜ê°€ ì¢…ë£Œë¨ê³¼ ë™ì‹œì— í•¨ìˆ˜ ì•ˆì—ì„œ ì‹¤í–‰ëœ í´ë¡œì €ê¹Œì§€ ì „ë¶€ ì¢…ë£Œë˜ì–´ ë²„ë¦½ë‹ˆë‹¤.** ì €í¬ê°€ ì›í•˜ëŠ” ê²°ê³¼ëŠ” ì ˆëŒ€ ì•„ë‹ˆì£ .

ê·¸ë¦¬ê³  ì• ì´ˆì— XCodeì—ì„œ ì´ë¥¼ í—ˆìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

> Warning: Escaping closure captures non-escaping parameter

ë¼ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ë©° ë¹Œë“œ ì—ëŸ¬ê°€ ë‚˜ì£ .

ì´ë ‡ê²Œ `@autoclosure`ì™€ `@escaping` í´ë¡œì €ê¹Œì§€ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤. @escaping í´ë¡œì €ëŠ” ì˜¨ë¼ì¸ìœ¼ë¡œ í†µì‹ í•˜ëŠ” ì•±ì—ì„œëŠ” ê±°ì˜ í•„ìˆ˜ì ìœ¼ë¡œ ì‚¬ìš©ë²•ì„ ì•Œì•„ë‘¬ì•¼ í•˜ë‹ˆ ê¼¼ê¼¼í•˜ê²Œ ê¸°ì–µí•´ë‘˜ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ì €ì²˜ëŸ¼ í—¤ë§¤ì§€ ì•Šìœ¼ë ¤ë©´ ë§ì´ì£  ã…œã…œ
