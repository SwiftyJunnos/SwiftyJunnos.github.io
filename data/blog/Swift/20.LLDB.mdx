---
title: ğŸ Swift - LLDB
date: 2023-09-17
tags:
  - Swift
draft: false
summary: Xcodeë¥¼ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
---

<TOCInline toc={props.toc} indentDepth={2} />

# LLDB (Low-Level-Debugger)

> LLDB is a next generation, high-performance debugger. It is built as a set of reusable components which highly leverage existing libraries in the largerÂ [LLVM Project](https://llvm.org/), such as the Clang expression parser and LLVM disassembler.

LLDBëŠ” LLVM(Low-Level-Virtual-Machine)ì˜ ì„œë¸Œ í”„ë¡œì íŠ¸ë“¤ ì¤‘ í•˜ë‚˜ë¡œì„œ, ë§ ê·¸ëŒ€ë¡œ ë””ë²„ê±°ì…ë‹ˆë‹¤.
LLVM í”„ë¡œì íŠ¸ëŠ” í¬ë¦¬ìŠ¤ ë˜íŠ¸ë„ˆì— ì˜í•´ ì‹œì‘ë˜ì—ˆê³ , ì´í›„ ì• í”Œì— ì˜ì…ë˜ì–´ í˜„ì¬ëŠ” Xcodeì˜ ê¸°ë³¸ ë””ë²„ê±°ë¡œ ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤.

## LLDB ì‚¬ìš©í•˜ê¸°

![](https://i.imgur.com/Ox2DHky.png)

LLDBëŠ” Xcodeì˜ í•˜ë‹¨ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ê°€ ì¼ì‹œ ì •ì§€ë˜ê±°ë‚˜ breakpointì— ê±¸ë ¸ì„ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ëŸ° í™”ë©´ ë§ì´ ë³´ì…¨ì£ ?

ì €ëŠ” LLDBë¥¼ ëª¨ë¥¼ ë•Œ 11ë°ì‹œë²¨ ë­ ì´ëŸ°ê±´ê°€..? í–ˆëŠ”ë° lldbë¼ëŠ” ë””ë²„ê±°ë¼ëŠ” ëœ»ì´ì˜€ì–´ìš”.. ğŸ˜…

```
(lldb) <noun> <verb> [-options [option-value]] [argument [argument...]]
```

LLDBì˜ ëª…ë ¹ì–´ëŠ” ì´ëŸ° êµ¬ì¡°ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.

`<noun>`ê³¼ `<verb>`ì—ëŠ” commandì™€ subcommandê°€ ì˜µë‹ˆë‹¤.
(`breakpoint`, `set`, `list` ê°™ì€...)

`option`ì€ ë‹¤ë¥¸ cli íˆ´ê³¼ ë¹„ìŠ·í•˜ê²Œ `-f` í˜¹ì€ `--file`ê°™ì´ `-`ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.

ê°„ë‹¨í•œ ì˜ˆì‹œë¥¼ í†µí•´ ì‰½ê²Œ ì‚´í´ë´…ì‹œë‹¤.

```
(lldb) breakpoint set --file foo.c --line 12
(lldb) breakpoint set -f foo.c -l 12
```

`breakpoint`ë¼ëŠ” ëª…ë ¹ì–´ì˜ í•˜ìœ„ ëª…ë ¹ì–´ `set`ì´ ì‹¤í–‰ë˜ê³  ìˆë„¤ìš”.
`--file` ì˜µì…˜ì„ í†µí•´ `foo.c` íŒŒì¼ì„ ì§€ì •í•´ì£¼ê³ , `--line` ì˜µì…˜ì„ í†µí•´ 12ë²ˆ ë¼ì¸ì„ ì§€ì •í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤.

### helpì™€ apropos

ë‹¹ì—°í•˜ê²Œë„ ëª¨ë“  ì»¤ë§¨ë“œë¥¼ ë‹¤ ì™¸ìš¸ìˆ˜ëŠ” ì—†ê² ì£ ?
`man`ê³¼ ê°™ì€ ë„ì›€ë§ ì»¤ë§¨ë“œê°€ LLDBì—ë„ ë‹¹ì—°í•˜ê²Œ ìˆìŠµë‹ˆë‹¤.

![](https://i.imgur.com/qCCGggv.png)

ì´ë ‡ê²Œ `help`ì™€ ì»¤ë§¨ë“œ, í˜¹ì€ ì„œë¸Œì»¤ë§¨ë“œì˜ ë„ì›€ë§ì„ ë³¼ ìˆ˜ ìˆêµ¬ìš”..

![](https://i.imgur.com/JwBGaAu.png)

`apropos`ë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ì£¼ì–´ì§„ í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ê´€ë ¨ëœ ì»¤ë§¨ë“œë“¤ì„ ì•ˆë‚´í•´ì¤ë‹ˆë‹¤.

## Breakpoint

ìœ„ì—ì„œ ì ê¹ ë§›ë³¸ ê²ƒ ì²˜ëŸ¼ LLDBë¥¼ ì‚¬ìš©í•´ breakpointë¥¼ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆëŠ”ë°ìš”,
ì´ ë¶€ë¶„ì€ ì‚¬ì‹¤ Xcodeì—ì„œ GUI í™˜ê²½ìœ¼ë¡œ ì œê³µí•˜ê³  ìˆê¸° ë•Œë¬¸ì— ê°„ë‹¨í•˜ê²Œ ì‚´í´ë³´ê³  ë„˜ì–´ê°‘ì‹œë‹¤.

### Breakpoint ë§Œë“¤ê¸°

ì¼ë‹¨ breakpointë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë§Œë“¤ì–´ì•¼ê² ì£ ?

- Function Name
	```
	(lldb) breakpoint set --name viewDidLoad
	```
- File
	```
	(lldb) breakpoint set --file ViewController.swift --line 20
	```
- Condition
	```
	(lldb) breakpoint set --name "viewWillAppear" --condition animated
	```

í•¨ìˆ˜ì˜ ì´ë¦„, íŒŒì¼, í˜¹ì€ ì¡°ê±´ì„ ì£¼ì–´ì„œ breakpointë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹µë‹ˆë‹¤.
Xcodeì—ì„œ í•˜ëŠ” ê²ƒê³¼ ê°™ì€ ê²ƒ ê°™ë‹¤êµ¬ìš”?
ë§ì•„ìš”.. Xcodeì˜ breakpoint ê¸°ëŠ¥ë„ LLDBë¥¼ ì‚¬ìš©í•˜ê±°ë“ ìš”.
ê·¸ë˜ì„œ ì‚¬ì‹¤ ê·¸ê²Œ ê·¸ê±°ëë‹ˆë‹¤ ğŸ˜Š

### Breakpoint ë¦¬ìŠ¤íŠ¸ í™•ì¸í•˜ê¸°

```
(lldb) breakpoint list
```

![](https://i.imgur.com/DnuudUr.png)

ì´ë ‡ê²Œ í˜„ì¬ ìƒì„±ë˜ì–´ ìˆëŠ” breakpointë“¤ì˜ ëª©ë¡ë„ ì‚´í´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Breakpoint ì‚­ì œ/ë¹„í™œì„±í™”í•˜ê¸°

```
(lldb) breakpoint delete (breakpoint id)
(lldb) breakpoint disable (breakpoint id)
```

![](https://i.imgur.com/NDyJlnO.png)

ë¹„í™œì„±í™”í•˜ê±°ë‚˜ ì‚­ì œí•˜ëŠ” ê¸°ëŠ¥ë„ ë‹¹ì—°íˆ ìˆì–´ì•¼ê² ì£ .
ëª…ë ¹ì–´ì˜ ë’¤ì— breakpointì˜ idë¥¼ ì£¼ë©´ íŠ¹ì • breakpointì— ëŒ€í•´ì„œë§Œ ìˆ˜í–‰ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

## Stepping

breakpointë¥¼ ê±¸ì—ˆë‹¤ë©´, ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ëŠ” ê¸°ëŠ¥ë„ ìˆì„ê²ë‹ˆë‹¤.

![](https://i.imgur.com/CuVEe6G.png)

ê·¸ëŸ°ë° ì´ ê¸°ëŠ¥ë„ í„°ë¯¸ë„ì˜ ìƒë‹¨ì— ë²„íŠ¼ìœ¼ë¡œ ì‰½ê²Œ ì œì–´í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê°„ë‹¨í•˜ê²Œ ì‚´í´ë´…ì‹œë‹¤.

- Stepping Over
	```
	(lldb) next
	```
	breakpointê°€ ê±¸ë¦° ì§€ì ì˜ ë°”ë¡œ ë‹¤ìŒ statementë¡œ ì§„í–‰í•©ë‹ˆë‹¤.
- Stepping In
	```
	(lldb) step
	```
	breakpointê°€ ê±¸ë¦° ì§€ì  ë‹¤ìŒì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤ë©´, í•´ë‹¹ í•¨ìˆ˜ì˜ ì‹œì‘ ì§€ì ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.
- Stepping Out
	```
	(lldb) finish
	```
	í˜„ì¬ í•¨ìˆ˜ë¥¼ ëë‚´ê³  ê·¸ ì´í›„ì˜ statementì— breakpointë¥¼ ê±¸ì–´ì¤ë‹ˆë‹¤.

## Expression

breakpointë¡œ ì¸í•´ í”„ë¡œì„¸ìŠ¤ê°€ ë©ˆì¶° ìˆì„ ë•Œ LLDBë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ê³  í–ˆì—ˆì£ ?
ì´ ë•Œì˜ ìƒí™©ì—ì„œ expression ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ íŠ¹ë³„í•œ ë™ì‘ë“¤ì„ ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì‚¬ì‹¤ ì´ ë¶€ë¶„ ë•Œë¬¸ì— LLDBì— ëŒ€í•´ì„œ ì•Œì•„ë³¼ ë§ˆìŒì´ ìƒê²¼ë‹µë‹ˆë‹¤ ğŸ˜Š

### po

ê°€ì¥ ë§ì´ ì‚¬ìš©ë  ëª…ë ¹ì–´ `(lldb) po`ì…ë‹ˆë‹¤.
ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ì½˜ì†”ì— ì¶œë ¥í•´ì£¼ê¸° ë•Œë¬¸ì´ì£ !

![](https://i.imgur.com/rSYq6Al.png)

ì°¸ê³ ë¡œ `po`ëŠ” `print -O --`ì˜ aliasì…ë‹ˆë‹¤.

![](https://i.imgur.com/R0Tdx3i.png)

ì´ë ‡ê²Œ ì¸ìŠ¤í„´ìŠ¤ì˜ ì •ë³´ë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤.

```swift
class Test: NSObject {
Â  Â  var a = 1

Â  Â  override var debugDescription: String {
Â  Â  Â  Â  return "Test Instance!!"
Â  Â  }
}
```

![](https://i.imgur.com/5UreJHW.png)

ì°¸ê³ ë¡œ ì´ ë•Œ ì¶œë ¥ë˜ëŠ” ê°’ì€ `NSObject`ì˜ `debugDescription` ê°’ì´ê¸° ë•Œë¬¸ì—, ì´ë¥¼ `override`í•´ì£¼ë©´ ì»¤ìŠ¤í…€ ëœ ì¶œë ¥ê°’ì„ ì–»ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

### variable ì‚¬ìš©í•˜ê¸°

![](https://i.imgur.com/ESbPcV2.png)

```
(lldb) e (variable)
```

ì„ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ variableì— ëŒ€í•œ ì •ë³´ë¥¼ ì•Œ ìˆ˜ ìˆê³ , ì£¼ì–´ì§€ëŠ” `$R0`ì™€ ê°™ì€ ë³€ìˆ˜ë¡œ ì ‘ê·¼í• ìˆ˜ë„ ìˆê²Œ ë©ë‹ˆë‹¤.

```
(lldb) e $R0.a = 2
```

ë¥¼ ì‚¬ìš©í•˜ë©´, í•´ë‹¹ ë³€ìˆ˜ì˜ `a` ê°’ì„ 2ë¡œ ì—…ë°ì´íŠ¸ í•´ì£¼ê² ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.
ì‹¤ì œë¡œ ë‹¤ì‹œ í•œ ë²ˆ `e test`ë¥¼ í†µí•´ì„œ ì •ë³´ë¥¼ ì¡°íšŒí•´ë³´ë‹ˆ `a`ì˜ ê°’ì´ 2ê°€ ëœ ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¶”ê°€ì ìœ¼ë¡œ ì´ë¯¸ ìˆëŠ” ë³€ìˆ˜ì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ê²ƒ ë¿ë§Œ ì•„ë‹ˆë¼
ìƒˆë¡œìš´ ë³€ìˆ˜ë¥¼ ì •ì˜í•´ì¤„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤!

```
(lldb) e let $someNumber = 10
(lldb) e var $someString = "Hello, World!"
```

![](https://i.imgur.com/WrGGtHA.png)

> ì¶œì²˜
> [Tutorial - ğŸ› LLDB](https://lldb.llvm.org/use/tutorial.html)
> [ì•¼ê³°ë‹·ë„· - LLDB ì •ë³µ](https://yagom.net/courses/start-lldb/)