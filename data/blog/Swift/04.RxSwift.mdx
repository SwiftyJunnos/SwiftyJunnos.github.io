---
title: 'ğŸ Swift - RxSwift'
date: '2022-03-18'
tags: ['Swift']
draft: false
summary: 'Reactiveí•œ Swiftì˜ ì‹œì‘'
---

ì˜¤ëŠ˜ì€ ëª¨ë‘ê°€ ì“°ì§€ë§Œ ì €ë§Œ ì•ˆì“°ê³  ìˆë˜ RxSwiftê°€ ë¬´ì—‡ì´ê³ , ì–´ë–»ê²Œ ì“°ëŠ”ê±´ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

ìš°ì„  RxSwiftëŠ” Swiftë§Œ ê°–ê³  ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì•„ë‹™ë‹ˆë‹¤. ì›ë˜ì˜ í”„ë¡œì íŠ¸ ëª…ì€ ReactiveXì´ê³  ì´ ì´ë¦„ìœ¼ë¡œëŠ” ì–´ë””ì„ ê°€ ë“¤ì–´ë´¤ë˜ ê²ƒ ê°™ê¸°ë„ í•˜ì£ . RxSwiftëŠ” ì´ ReactiveXë¥¼ Swiftì— ì´ì‹í•œ ë²„ì „ì˜ ì´ë¦„ì…ë‹ˆë‹¤.

# Reactive X

ê·¸ë ‡ë‹¤ë©´ **ReactiveX**ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?

ë³´í†µ ìš°ë¦¬ê°€ ì§œëŠ” ì½”ë“œëŠ” **ë™ê¸°ì (Synchronous)** ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤. ìš°ë¦¬ê°€ ì ì€ ìœ— ì¤„ë¶€í„° ì•„ë˜ ì¤„ê¹Œì§€ ìˆœì„œëŒ€ë¡œ **í•œ ë²ˆì— í•œ ì¤„ì”© ì°¨ê·¼ì°¨ê·¼** ì‹¤í–‰ë˜ì£ . í•˜ì§€ë§Œ **ReactiveX**ì—ì„œëŠ” ì‘ì—…ë“¤ì„ ìš°ì„  **ë³‘ë ¬(parallel)ì ìœ¼ë¡œ ì‹¤í–‰** í•˜ê³ , **â€observersâ€** ë¼ëŠ” ë†ˆë“¤ë¡œ ë‚˜ì¤‘ì— ê²°ê³¼ë¬¼ì„ ë°›ì•„ì˜µë‹ˆë‹¤.

ReactiveXì—ì„œ ì‘ì—…ì€ ì•„ë˜ êµ¬ì¡°ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

> Observable â¬…ï¸ Subscribe â—€ï¸ Observer

Observableì—ì„œ ì–´ë–¤ í–‰ë™ì´ í¬ì°©ë˜ë©´ ObserverëŠ” ê·¸ì— ë§ëŠ” ë°˜ì‘ì„ ë³´ë‚´ì¤ë‹ˆë‹¤.

## Observable

### Observable ë°œí–‰

ë¹„ë™ê¸°ì„±(Asynchronous) ëª¨ë¸ì˜ íë¦„ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

1. ë¹„ë™ê¸°ì„± í˜¸ì¶œì˜ return ê°’ì„ í™œìš©í•˜ì—¬ methodë¥¼ ì •ì˜í•œë‹¤: **Observer**ì˜ ì¼ë¶€ë¶„
2. ë¹„ë™ê¸°ì„± í˜¸ì¶œì„ ì •ì˜í•œë‹¤: **Observable**
3. **Observer**ë¥¼ **Observable**ì— ì—°ê²°í•œë‹¤: **Subscribe**
4. return valueì™€ valueë¥¼ í™œìš©í•œë‹¤.

```java
def myOnNext = { it -> do something useful with it };
def myObservable = someObservable(itsParameters);
myObservable.subscribe(myOnNext);
```

### onNext, onCompleted, onError

Subscribeëœ ObserverëŠ” ìƒí™©ì— ë”°ë¼ subsetì„ ê°€ì§‘ë‹ˆë‹¤.

**onNext**

Observableì´ ì–´ë–¤ ì •ë³´ë¥¼ ë‚´ë³´ë‚´ë©´, `onNext` methodì˜ ì¸ìë¡œ ë°›ì•„ì˜µë‹ˆë‹¤.

**onError**

ì˜ˆìƒí•œ ë°ì´í„°ë¥¼ ìƒì„±í•˜ëŠ” ë° **ì‹¤íŒ¨**í•˜ê±°ë‚˜ **ì—ëŸ¬**ê°€ ë°œìƒí•˜ë©´ `onError` methodë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. onError methodë¥¼ í˜¸ì¶œí•œ ì´í›„ì—ëŠ” `onNext`, `onCompleted` methodë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. `onError` methodì˜ ì¸ìë¡œëŠ” ë¬´ì—‡ì´ ì—ëŸ¬ë¥¼ ì¼ìœ¼ì¼°ëŠ”ì§€ ë°›ì•„ì˜µë‹ˆë‹¤.

**onCompleted**

ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ì„ ë•Œ, ë§ˆì§€ë§‰ `onNext` methodë¥¼ í˜¸ì¶œí•œ í›„ì— í˜¸ì¶œë©ë‹ˆë‹¤.

ì •ë¦¬í•´ë³´ë©´, `onNext`ëŠ” ì—¬ëŸ¬ë²ˆ ë°œìƒí•  ìˆ˜ë„ ìˆì§€ë§Œ `onError`ì™€ `onCompleted`ëŠ” ì¢‹ë“  ì‹«ë“  í•œ ë²ˆë§Œ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤!

```java
def myOnNext     = { item -> /* do something userful with item */ };
def myError      = { throwable -> /* react sensibly to a failed call */ };
def myComplete   = { /* clean up after the final response */ };
def myObservable = someMethod(itsParameters);
myObservable.subscribe(myOnNext, myError, myComplete);
```

### Unsubscribing

`Observable`ì´ ë” ì´ìƒ ëª¨ë‹ˆí„°ë§ì´ í•„ìš” ì—†ì–´ì§ˆ ê²½ìš°, `subscribe`ë¥¼ í•´ì œí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

`Observable`ì´ unsubscribe ë˜ë©´, ìƒˆë¡œìš´ ë°©ì¶œê°’ì„ ìƒì„±í•˜ëŠ” ê²ƒì„ ë©ˆì¶œ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ê·¸ëŸ°ë° ì£¼ì˜í•  ì ì€, ì´ ê³¼ì •ì€ ì•½ê°„ì˜ ë”œë ˆì´ê°€ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë°©ì¶œê°’ì´ ì¡°ê¸ˆ ë” ìƒì„±ëœ í›„ì— ë©ˆì¶œ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

### Hot & Cold Observables

**Hot Observable**

**ìƒì„±ë¨ê³¼ ë™ì‹œì— ë°©ì¶œê°’ì´ ìƒì„±**ë©ë‹ˆë‹¤. Subscribeí•˜ëŠ” ObserverëŠ” ì¤‘ê°„ê°’ë¶€í„° ê°’ì„ ë°›ì•„ê°€ê²Œ ë©ë‹ˆë‹¤.

**Cold Observable**

**Subscribe ë˜ë©´, ê·¸ë•Œë¶€í„° ë°©ì¶œê°’ì´ ë°œìƒ**í•©ë‹ˆë‹¤. ë•Œë¬¸ì— Subscribeí•˜ëŠ” ObserverëŠ” ìƒì„±ëœ ëª¨ë“  ê°’ì„ ë°›ì•„ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Operators

### Chaining Operators

ê±°ì˜ ëŒ€ë¶€ë¶„ì˜ operatorë“¤ì€ Observable ì•ˆì—ì„œ ì‘ë™í•˜ê³ , Observableì„ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ì„œë¡œê°€ ì„œë¡œì—ê²Œ ì—°ê²°ë˜ì–´ ì¼ì¢…ì˜ **ì²´ì¸**ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë•Œ Operatorë“¤ ê°„ì˜ chainì€ ë…ë¦½ì ìœ¼ë¡œ ì‹œí–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì—°ê²°ëœ ìˆœì„œì— ë”°ë¼ **ìˆœì„œëŒ€ë¡œ í•˜ë‚˜ì”© ì‹œí–‰**ë˜ê²Œ ë©ë‹ˆë‹¤.

### Operators by Category

ê³µì‹ ë¬¸ì„œë¥¼ ë³´ë©´ ê° operatorì˜ ê¸°ëŠ¥ì„ ì¹´í…Œê³ ë¦¬í™” í•˜ì—¬ ë¶„ë¥˜í•´ë‘ì—ˆëŠ”ë°, ì´ë¥¼ í•œ ë²ˆì”© ì‚´í´ë³´ë©° ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤!

**Creating Observables**

- **`create`**

Observableì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
let source: Observable = Observable.create { observer in
  for i in 1...5 {
    observer.on(.next(i))
  }
  observer.on(.completed)

  return Disposables.create {
    print("disposed")
  }
}
```

```bash
next(1)
next(2)
next(3)
next(4)
next(5)
completed
disposed
```

- **`just`**

ê°„ë‹¨í•˜ê²Œ ì–´ë–¤ í•˜ë‚˜ì˜ ê°’ì„ Observableë¡œ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

```swift
let source = Observable.just(1, 2, 3)
let source2 = Observable.just([1,2,3])
```

```bash
1, 2, 3
[1, 2, 3]
```

- **`from`**

ì—¬ëŸ¬ê°œì˜ ê°’ì´ ìˆê³  ê°ê°ì„ Observableë¡œ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

```swift
let numbers = [1,2,3,4,5]
let source = Observable.from(numbers)
```

```bash
1
2
3
4
5
```

- **`of`**

ì—¬ëŸ¬ê°œì˜ ê°’ì„ Observableë¡œ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

`from`ê³¼ `just`ì˜ ì¤‘ê°„ ì •ë„ë¡œ ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.

ë°°ì—´ì„ ì‚¬ìš©í–ˆì„ ë•ŒëŠ” ë°°ì—´ ê·¸ëŒ€ë¡œ ë°©ì¶œí•˜ê³ , ì•„ë‹ë•ŒëŠ” ê°ê°ì˜ ê°’ì„ í•˜ë‚˜ì”© ë°©ì¶œí•©ë‹ˆë‹¤.

```swift
let source = Observable.of(1, 2, 3)
let source2 = Observable.of([1, 2, 3])
```

```bash
1
2
3
1, 2, 3
```

**Transforming Observables**

- **`map`**

ê°ê°ì˜ ê°’ì„ ì›í•˜ëŠ” í˜•íƒœë¡œ ë³€í™˜í•˜ì—¬ Observableë¡œ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

```swift
let source = Observable.from([1, 2, 3]).map { $0 * 2 }
```

```bash
2
4
6
```

- **`flatMap`**

ê°ê°ì˜ Observableì´ ë°©ì¶œí•œ ê°’ì— ëŒ€í•´ ì§€ì •í•œ í•¨ìˆ˜ë¥¼ ì ìš©í•©ë‹ˆë‹¤. ì´ ë–„, ê° í•¨ìˆ˜ëŠ” ìì²´ì ìœ¼ë¡œ ê°’ì„ ë°©ì¶œí•˜ëŠ” Observalbeì„ ë°˜í™˜í•©ë‹ˆë‹¤.

```swift
let observableInt = Observable.of(1, 2, 3)
let observableString = Observable.of("A", "B", "C")

observableInt
  .flatMap { (x: Int) -> Observable<String> in
    return observableString
  }
```

```bash
next(A)
next(B)
next(A)
next(C)
next(B)
next(A)
next(C)
next(B)
next(C)
completed
```

- **`scan`**

```swift
let observable = Observable.of(1, 2, 3).scan(0) { $0 + $1 }
```

```bash
1
3
6
```

**Filtering Observables**

- **`filter`**

ê²°ê³¼ë¥¼ ì›í•˜ëŠ” ì¡°ê±´ì— ë§ê²Œ í•„í„°ë§í•˜ì—¬ ë°©ì¶œí•©ë‹ˆë‹¤.

```swift
let observable = Observable.from([1, 2, 3]).filter { $0 > 1 }
```

```bash
2
3
```

- **`first`, `last`**

ê²°ê³¼ ì¤‘ ê°€ì¥ ì²«ë²ˆì§¸/ë§ˆì§€ë§‰ì„ ë°©ì¶œí•©ë‹ˆë‹¤.

```swift
let observable = Observable.from([1, 2, 3]).first
```

```bash
Optional(1)
```

- **`take`, `takeLast`**

ê²°ê³¼ ì¤‘ ë§ˆì§€ë§‰/ì²˜ìŒë¶€í„° në²ˆì§¸ê¹Œì§€ ë°©ì¶œí• ì§€ ì •í•´ì„œ ë°©ì¶œí•©ë‹ˆë‹¤.

```swift
let observable = Observable.from([1, 2, 3]).takeLast(2)
```

```bash
2
3
```

- **`elementAt`**

në²ˆì§¸ ì¸ë±ìŠ¤ì˜ ê²°ê³¼ë¥¼ ë°©ì¶œí•©ë‹ˆë‹¤.

```swift
let observable = Observable.from([1, 2, 3]).elementAt(2)
```

```bash
3
```

**Combining Observables**

- **`merge`**

ì—¬ëŸ¬ Observableì˜ ê²°ê³¼ë¥¼ í•˜ë‚˜ì˜ Observableë¡œ í•©í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ ë•Œ, í•˜ë‚˜ì˜ Observableì´ë¼ë„ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´, í•©ì³ì§„ Observableë„ ì¢…ë£Œë©ë‹ˆë‹¤.

```swift
let observableInt = Observable.of(1, 2, 3)
let observableInt2 = Observable.of(4, 5, 6)
let observableMerge = Observable.of(observableInt, observableInt2).merge()
```

```bash
1
2
4
3
5
6
```

- **`zip`**

ê° Observableì˜ ìˆœì„œëŒ€ë¡œ ì§ì„ ë§ì¶”ì–´ ì—°ì‚° ê²°ê³¼ë¥¼ ë°©ì¶œí•©ë‹ˆë‹¤. ì§ì´ ë§ì§€ ì•ŠëŠ” ê°’ì€ ë²„ë¦½ë‹ˆë‹¤.

```swift
let observableInt = Observable.of(1, 2, 3, 4)
let observableString = Observable.of("A", "B", "C")
let observableZip = Observable.zip(observableInt, observableString) {
  "\($0)" + $1
}
```

```bash
1A
2B
3C
```

- **`combineLatest`**

ê° Observableì˜ ë§ˆì§€ë§‰ ê°’ë¼ë¦¬ì˜ ì—°ì‚° ê²°ê³¼ë¥¼ ë°©ì¶œí•©ë‹ˆë‹¤.

```swift
let observableInt = Observable.of(1, 2, 3)
let observableString = Observable.of("A", "B", "C")
let observableCombineLatest = Observable.combineLatest(observableInt, observableString) {
  "\($0)" + $1
}
```

```bash
1A
1B
2B
3B
3C
```
